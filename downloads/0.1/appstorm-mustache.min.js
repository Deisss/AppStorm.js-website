(function(c,b){if("object"==typeof exports&&exports)b(exports);else{var d={};b(d);"function"==typeof define&&define.amd?define(d):c.Mustache=d}})(this,function(c){function b(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(b){this.tail=this.string=b;this.pos=0}function e(b,c){this.view=b||{};this.parent=c;this._cache={}}function f(){this.clearCache()}function g(b,d,e,f){for(var m,l,h,q="",k=0,w=b.length;w>k;++k)switch(m=b[k],l=m[1],m[0]){case "#":if(h=e.lookup(l),"object"==typeof h)if(p(h)){l=
0;for(var r=h.length;r>l;++l)q+=g(m[4],d,e.push(h[l]),f)}else h&&(q+=g(m[4],d,e.push(h),f));else"function"==typeof h?(l=null==f?null:f.slice(m[3],m[5]),h=h.call(e.view,l,function(b){return d.render(b,e)}),null!=h&&(q+=h)):h&&(q+=g(m[4],d,e,f));break;case "^":h=e.lookup(l);(!h||p(h)&&0===h.length)&&(q+=g(m[4],d,e,f));break;case ">":h=d.getPartial(l);"function"==typeof h&&(q+=h(e));break;case "&":h=e.lookup(l);null!=h&&(q+=h);break;case "name":h=e.lookup(l);null!=h&&(q+=c.escape(h));break;case "text":q+=
l}return q}function h(c){return[RegExp(b(c[0])+"\\s*"),RegExp("\\s*"+b(c[1]))]}var k=/\s*/,l=/\s+/,w=/\S/,r=/\s*=/,t=/\s*\}/,z=/#|\^|\/|>|\{|&|=|!/,s=RegExp.prototype.test,v=Object.prototype.toString,p=Array.isArray||function(b){return"[object Array]"===v.call(b)},m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.prototype.eos=function(){return""===this.tail};d.prototype.scan=function(b){return(b=this.tail.match(b))&&0===b.index?(this.tail=this.tail.substring(b[0].length),
this.pos+=b[0].length,b[0]):""};d.prototype.scanUntil=function(b){var c=this.tail.search(b);switch(c){case -1:b=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return b};e.make=function(b){return b instanceof e?b:new e(b)};e.prototype.push=function(b){return new e(b,this)};e.prototype.lookup=function(b){var c=this._cache[b];if(!c){if("."==b)c=this.view;else for(var d=this;d;){if(0<b.indexOf("."))for(var c=
d.view,e=b.split("."),f=0;c&&e.length>f;)c=c[e[f++]];else c=d.view[b];if(null!=c)break;d=d.parent}this._cache[b]=c}return"function"==typeof c&&(c=c.call(this.view)),c};f.prototype.clearCache=function(){this._cache={};this._partialCache={}};f.prototype.compile=function(b,d){var e=this._cache[b];e||(e=c.parse(b,d),e=this._cache[b]=this.compileTokens(e,b));return e};f.prototype.compilePartial=function(b,c,d){c=this.compile(c,d);return this._partialCache[b]=c,c};f.prototype.getPartial=function(b){return b in
this._partialCache||!this._loadPartial||this.compilePartial(b,this._loadPartial(b)),this._partialCache[b]};f.prototype.compileTokens=function(b,c){var d=this;return function(f,m){if(m)if("function"==typeof m)d._loadPartial=m;else for(var h in m)d.compilePartial(h,m[h]);return g(b,d,e.make(f),c)}};f.prototype.render=function(b,c,d){return this.compile(b)(c,d)};c.name="mustache.js";c.version="0.7.2";c.tags=["{{","}}"];c.Scanner=d;c.Context=e;c.Writer=f;c.parse=function(e,f){if(e=e||"",f=f||c.tags,"string"==
typeof f&&(f=f.split(l)),2!==f.length)throw Error("Invalid tags: "+f.join(", "));for(var m,g,q,p,C,D=h(f),B=new d(e),I=[],M=[],E=[],N=!1,v=!1;!B.eos();){if(m=B.pos,q=B.scanUntil(D[0]))for(var O=0,J=q.length;J>O;++O)if(p=q.charAt(O),s.call(w,p)?v=!0:E.push(M.length),M.push(["text",p,m,m+1]),m+=1,"\n"==p){if(N&&!v)for(;E.length;)delete M[E.pop()];else E=[];v=N=!1}if(!B.scan(D[0]))break;if(N=!0,g=B.scan(z)||"name",B.scan(k),"="===g?(q=B.scanUntil(r),B.scan(r),B.scanUntil(D[1])):"{"===g?(q=B.scanUntil(RegExp("\\s*"+
b("}"+f[1]))),B.scan(t),B.scanUntil(D[1]),g="&"):q=B.scanUntil(D[1]),!B.scan(D[1]))throw Error("Unclosed tag at "+B.pos);if(C=[g,q,m,B.pos],M.push(C),"#"===g||"^"===g)I.push(C);else if("/"===g){if(0===I.length)throw Error('Unopened section "'+q+'" at '+m);p=I.pop();if(p[1]!==q)throw Error('Unclosed section "'+p[1]+'" at '+m);}else if("name"===g||"{"===g||"&"===g)v=!0;else if("="===g){if(f=q.split(l),2!==f.length)throw Error("Invalid tags at "+m+": "+f.join(", "));D=h(f)}}if(p=I.pop())throw Error('Unclosed section "'+
p[1]+'" at '+B.pos);m=M;var H;q=[];C=0;for(D=m.length;D>C;++C)(g=m[C])&&("text"===g[0]&&H&&"text"===H[0]?(H[1]+=g[1],H[3]=g[3]):(H=g,q.push(g)));H=q;var K;g=m=[];q=[];C=0;for(D=H.length;D>C;++C)switch(K=H[C],K[0]){case "#":case "^":q.push(K);g.push(K);g=K[4]=[];break;case "/":q.pop()[5]=K[2];g=0<q.length?q[q.length-1][4]:m;break;default:g.push(K)}return m};c.escape=function(b){return(b+"").replace(/[&<>"'\/]/g,function(b){return m[b]})};var q=new f;c.clearCache=function(){return q.clearCache()};c.compile=
function(b,c){return q.compile(b,c)};c.compilePartial=function(b,c,d){return q.compilePartial(b,c,d)};c.compileTokens=function(b,c){return q.compileTokens(b,c)};c.render=function(b,c,d){return q.render(b,c,d)};c.to_html=function(b,d,e,f){b=c.render(b,d,e);return"function"!=typeof f?b:(f(b),void 0)}});(function(){function c(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)}function b(b){if("keypress"==b.type){var c=String.fromCharCode(b.which);b.shiftKey||(c=c.toLowerCase());return c}return r[b.which]?r[b.which]:t[b.which]?t[b.which]:String.fromCharCode(b.which).toLowerCase()}function d(b){b=b||{};var c=!1,d;for(d in q)b[d]?c=!0:q[d]=0;c||(n=!1)}function e(b,c,d,e,f){var m,h,g=[],l=d.type;if(!p[b])return[];"keyup"==l&&k(b)&&(c=[b]);for(m=0;m<p[b].length;++m)(h=p[b][m],
h.seq&&q[h.seq]!=h.level||l!=h.action||("keypress"!=l||d.metaKey||d.ctrlKey)&&c.sort().join(",")!==h.modifiers.sort().join(","))||(e&&h.combo==f&&p[b].splice(m,1),g.push(h));return g}function f(b){var c=[];b.shiftKey&&c.push("shift");b.altKey&&c.push("alt");b.ctrlKey&&c.push("ctrl");b.metaKey&&c.push("meta");return c}function g(b,c,d){y.stopCallback(c,c.target||c.srcElement,d)||!1!==b(c,d)||(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation(),c.returnValue=!1,c.cancelBubble=
!0)}function h(c){"number"!==typeof c.which&&(c.which=c.keyCode);var d=b(c);d&&("keyup"==c.type&&u==d?u=!1:y.handleKey(d,f(c),c))}function k(b){return"shift"==b||"ctrl"==b||"alt"==b||"meta"==b}function l(b,c,d){if(!d){if(!v){v={};for(var e in r)95<e&&112>e||r.hasOwnProperty(e)&&(v[r[e]]=e)}d=v[b]?"keydown":"keypress"}"keypress"==d&&c.length&&(d="keydown");return d}function w(c,f,h,r,I){m[c+":"+h]=f;c=c.replace(/\s+/g," ");var A=c.split(" "),E,t,y=[];if(1<A.length){var v=c,J=h;q[v]=0;J||(J=l(A[0],
[]));c=function(){n=J;++q[v];clearTimeout(x);x=setTimeout(d,1E3)};h=function(c){g(f,c,v);"keyup"!==J&&(u=b(c));setTimeout(d,10)};for(r=0;r<A.length;++r)w(A[r],r<A.length-1?c:h,J,v,r)}else{t="+"===c?["+"]:c.split("+");for(A=0;A<t.length;++A)E=t[A],s[E]&&(E=s[E]),h&&"keypress"!=h&&z[E]&&(E=z[E],y.push("shift")),k(E)&&y.push(E);h=l(E,y,h);p[E]||(p[E]=[]);e(E,y,{type:h},!r,c);p[E][r?"unshift":"push"]({callback:f,modifiers:y,action:h,seq:r,level:I,combo:c})}}for(var r={8:"backspace",9:"tab",13:"enter",
16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},t={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},z={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",
"return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},v,p={},m={},q={},x,u=!1,n=!1,A=1;20>A;++A)r[111+A]="f"+A;for(A=0;9>=A;++A)r[A+96]=A;c(document,"keypress",h);c(document,"keydown",h);c(document,"keyup",h);var y={bind:function(b,c,d){b=b instanceof Array?b:[b];for(var e=0;e<b.length;++e)w(b[e],c,d);return this},unbind:function(b,c){return y.bind(b,function(){},c)},trigger:function(b,c){if(m[b+":"+c])m[b+":"+c]({},b);return this},reset:function(){p={};
m={};return this},stopCallback:function(b,c){return-1<(" "+c.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==c.tagName||"SELECT"==c.tagName||"TEXTAREA"==c.tagName||c.contentEditable&&"true"==c.contentEditable},handleKey:function(b,c,f){c=e(b,c,f);var m,h={},l=0,q=!1;for(m=0;m<c.length;++m)c[m].seq&&(l=Math.max(l,c[m].level));for(m=0;m<c.length;++m)c[m].seq?c[m].level==l&&(q=!0,h[c[m].seq]=1,g(c[m].callback,f,c[m].combo)):q||g(c[m].callback,f,c[m].combo);f.type==n&&!k(b)&&d(h)}};window.Mousetrap=
y;"function"===typeof define&&define.amd&&define(y)})();(function(){function c(c){var m,h,g,q="json"==c;if(q||"json-stringify"==c||"json-parse"==c){if("json-stringify"==c||q){if(m="function"==typeof l.stringify&&y){(g=function(){return 1}).toJSON=g;try{m="0"===l.stringify(0)&&"0"===l.stringify(new Number)&&'""'==l.stringify(new String)&&l.stringify(f)===b&&l.stringify(b)===b&&l.stringify()===b&&"1"===l.stringify(g)&&"[1]"==l.stringify([g])&&"[null]"==l.stringify([b])&&"null"==l.stringify(e)&&"[null,null,null]"==l.stringify([b,f,e])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==
l.stringify({A:[g,d,!1,e,"\x00\b\n\f\r\t"]})&&"1"===l.stringify(e,g)&&"[\n 1,\n 2\n]"==l.stringify([1,2],e,1)&&'"-271821-04-20T00:00:00.000Z"'==l.stringify(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==l.stringify(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==l.stringify(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==l.stringify(new Date(-1))}catch(n){m=!1}}if(!q)return m}if("json-parse"==c||q){if("function"==typeof l.parse)try{if(0===l.parse("0")&&!l.parse(!1)&&(g=l.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),
h=5==g.a.length&&1==g.a[0])){try{h=!l.parse('"\t"')}catch(p){}if(h)try{h=1!=l.parse("01")}catch(u){}}}catch(k){h=!1}if(!q)return h}return m&&h}}var b=void 0,d=!0,e=null,f={}.toString,g,h,k="function"===typeof define&&define.c,l=!k&&"object"==typeof exports&&exports;l||k?"object"==typeof JSON&&JSON?k?l=JSON:(l.stringify=JSON.stringify,l.parse=JSON.parse):k&&(l=this.JSON={}):l=this.JSON||(this.JSON={});var w,r,t,z,s,v,p,m,q,x,u,n,A,y=new Date(-0xc782b5b800cec),F,C,D;try{y=-109252==y.getUTCFullYear()&&
0===y.getUTCMonth()&&1==y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(B){}c("json")||(y||(F=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(b,c){return C[c]+365*(b-1970)+F((b-1969+(c=+(1<c)))/4)-F((b-1901+c)/100)+F((b-1601+c)/400)}),(g={}.hasOwnProperty)||(g=function(b){var c={},d;(c.__proto__=e,c.__proto__={toString:1},c).toString!=f?g=function(b){var c=this.__proto__;b=b in(this.__proto__=e,this);this.__proto__=
c;return b}:(d=c.constructor,g=function(b){var c=(this.constructor||d).prototype;return b in this&&!(b in c&&this[b]===c[b])});c=e;return g.call(this,b)}),h=function(b,c){var d=0,m,h,l;(m=function(){this.valueOf=0}).prototype.valueOf=0;h=new m;for(l in h)g.call(h,l)&&d++;m=h=e;d?d=2==d?function(b,c){var d={},e="[object Function]"==f.call(b),m;for(m in b)e&&"prototype"==m||g.call(d,m)||(d[m]=1)&&g.call(b,m)&&c(m)}:function(b,c){var d="[object Function]"==f.call(b),e,m;for(e in b)d&&"prototype"==e||
!g.call(b,e)||(m="constructor"===e)||c(e);(m||g.call(b,e="constructor"))&&c(e)}:(h="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),d=function(b,c){var d="[object Function]"==f.call(b),e;for(e in b)d&&"prototype"==e||!g.call(b,e)||c(e);for(d=h.length;e=h[--d];g.call(b,e)&&c(e));});d(b,c)},c("json-stringify")||(w={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},r=function(b,c){return("000000"+(c||0)).slice(-b)},
t=function(b){for(var c='"',d=0,e;e=b.charAt(d);d++)c+=-1<'\\"\b\f\n\r\t'.indexOf(e)?w[e]:w[e]=" ">e?"\\u00"+r(2,e.charCodeAt(0).toString(16)):e;return c+'"'},z=function(c,m,l,q,n,p,u){var k=m[c],x,w,A,s,y,v,C,B,L;if("object"==typeof k&&k)if(x=f.call(k),"[object Date]"!=x||g.call(k,"toJSON"))"function"==typeof k.toJSON&&("[object Number]"!=x&&"[object String]"!=x&&"[object Array]"!=x||g.call(k,"toJSON"))&&(k=k.toJSON(c));else if(k>-1/0&&k<1/0){if(D){A=F(k/864E5);for(x=F(A/365.2425)+1970-1;D(x+1,0)<=
A;x++);for(w=F((A-D(x,0))/30.42);D(x,w+1)<=A;w++);A=1+A-D(x,w);s=(k%864E5+864E5)%864E5;y=F(s/36E5)%24;v=F(s/6E4)%60;C=F(s/1E3)%60;s%=1E3}else x=k.getUTCFullYear(),w=k.getUTCMonth(),A=k.getUTCDate(),y=k.getUTCHours(),v=k.getUTCMinutes(),C=k.getUTCSeconds(),s=k.getUTCMilliseconds();k=(0>=x||1E4<=x?(0>x?"-":"+")+r(6,0>x?-x:x):r(4,x))+"-"+r(2,w+1)+"-"+r(2,A)+"T"+r(2,y)+":"+r(2,v)+":"+r(2,C)+"."+r(3,s)+"Z"}else k=e;l&&(k=l.call(m,c,k));if(k===e)return"null";x=f.call(k);if("[object Boolean]"==x)return""+
k;if("[object Number]"==x)return k>-1/0&&k<1/0?""+k:"null";if("[object String]"==x)return t(k);if("object"==typeof k){for(c=u.length;c--;)if(u[c]===k)throw TypeError();u.push(k);B=[];m=p;p+=n;if("[object Array]"==x){w=0;for(c=k.length;w<c;L||(L=d),w++)x=z(w,k,l,q,n,p,u),B.push(x===b?"null":x);c=L?n?"[\n"+p+B.join(",\n"+p)+"\n"+m+"]":"["+B.join(",")+"]":"[]"}else h(q||k,function(c){var e=z(c,k,l,q,n,p,u);e!==b&&B.push(t(c)+":"+(n?" ":"")+e);L||(L=d)}),c=L?n?"{\n"+p+B.join(",\n"+p)+"\n"+m+"}":"{"+B.join(",")+
"}":"{}";u.pop();return c}},l.stringify=function(b,c,d){var e,m,h,g,l,q;if("function"==typeof c||"object"==typeof c&&c)if("[object Function]"==f.call(c))m=c;else if("[object Array]"==f.call(c))for(h={},g=0,l=c.length;g<l;q=c[g++],("[object String]"==f.call(q)||"[object Number]"==f.call(q))&&(h[q]=1));if(d)if("[object Number]"==f.call(d)){if(0<(d-=d%1))for(e="",10<d&&(d=10);e.length<d;e+=" ");}else"[object String]"==f.call(d)&&(e=10>=d.length?d:d.slice(0,10));return z("",(q={},q[""]=b,q),m,h,e,"",
[])}),c("json-parse")||(s=String.fromCharCode,v={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},p=function(){n=A=e;throw SyntaxError();},m=function(){for(var b=A,c=b.length,m,f,h,g,l;n<c;)if(m=b.charAt(n),-1<"\t\r\n ".indexOf(m))n++;else{if(-1<"{}[]:,".indexOf(m))return n++,m;if('"'==m){f="@";for(n++;n<c;)if(m=b.charAt(n)," ">m)p();else if("\\"==m)if(m=b.charAt(++n),-1<'\\"/btnfr'.indexOf(m))f+=v[m],n++;else if("u"==m){h=++n;for(g=n+4;n<g;n++)m=b.charAt(n),"0"<=m&&"9">=m||"a"<=m&&"f">=
m||"A"<=m&&"F">=m||p();f+=s("0x"+b.slice(h,n))}else p();else{if('"'==m)break;f+=m;n++}if('"'==b.charAt(n))return n++,f}else{h=n;"-"==m&&(l=d,m=b.charAt(++n));if("0"<=m&&"9">=m){for("0"==m&&(m=b.charAt(n+1),"0"<=m&&"9">=m)&&p();n<c&&(m=b.charAt(n),"0"<=m&&"9">=m);n++);if("."==b.charAt(n)){for(g=++n;g<c&&(m=b.charAt(g),"0"<=m&&"9">=m);g++);g==n&&p();n=g}m=b.charAt(n);if("e"==m||"E"==m){m=b.charAt(++n);"+"!=m&&"-"!=m||n++;for(g=n;g<c&&(m=b.charAt(g),"0"<=m&&"9">=m);g++);g==n&&p();n=g}return+b.slice(h,
n)}l&&p();if("true"==b.slice(n,n+4))return n+=4,d;if("false"==b.slice(n,n+5))return n+=5,!1;if("null"==b.slice(n,n+4))return n+=4,e}p()}return"$"},q=function(b){var c,e;"$"==b&&p();if("string"==typeof b){if("@"==b.charAt(0))return b.slice(1);if("["==b){for(c=[];;e||(e=d)){b=m();if("]"==b)break;e&&(","==b?(b=m(),"]"==b&&p()):p());","==b&&p();c.push(q(b))}return c}if("{"==b){for(c={};;e||(e=d)){b=m();if("}"==b)break;e&&(","==b?(b=m(),"}"==b&&p()):p());","!=b&&"string"==typeof b&&"@"==b.charAt(0)&&":"==
m()||p();c[b.slice(1)]=q(m())}return c}p()}return b},u=function(c,d,e){e=x(c,d,e);e===b?delete c[d]:c[d]=e},x=function(b,c,d){var e=b[c],m;if("object"==typeof e&&e)if("[object Array]"==f.call(e))for(m=e.length;m--;)u(e,m,d);else h(e,function(b){u(e,b,d)});return d.call(b,c,e)},l.parse=function(b,c){var d,h;n=0;A=b;d=q(m());"$"!=m()&&p();n=A=e;return c&&"[object Function]"==f.call(c)?x((h={},h[""]=d,h),"",c):d}));k&&define(function(){return l})})();window.appstorm=window.a=function(){var c={},b={url:"",contains:function(b,c){if(b instanceof Array)for(var d=b.length;d--;){if(b[d]===c)return!0}else if(this.isObject(b))return c in b;return!1},clone:function(b){if(a.isObject(b)){if(a.isArray(b))for(var c=b.length,d=Array(c),h=0;h<c;++h)d[h]=a.clone(b[h]);else for(c in d={},a.isFunction(b.constructor)&&(d=new b.constructor),a.isObject(b.prototype)&&(d.prototype=b.prototype),b)d[c]=a.clone(b[c]);return d}return b},getStackTrace:function(){return Error().stack},
isNumber:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},isObject:function(b){return"object"===typeof b&&null!==b},isString:function(b){return"string"===typeof b},isFunction:function(b){return"function"===typeof b},isNull:function(b){return"undefined"===typeof b||null===b},isBoolean:function(b){return"boolean"===typeof b},isArray:function(b){return b instanceof Array},setDefaultAjaxOptions:function(b){a.isObject(b)&&(c=b)},getDefaultAjaxOptions:function(){return c}},d=document.getElementById("a-core");
d&&"undefined"!==typeof d.src&&(b.url=d.src.replace(/\/[^/]*$/,"/"));return b}();a.ajax=function(c,b,d){var e=a.getDefaultAjaxOptions();this.params={url:"",method:"GET",type:"raw",async:!0,cache:!1,data:{},header:{}};for(var f in this.params)"data"!==f&&"header"!==f&&(f in e&&typeof e[f]===typeof this.params[f]&&(this.params[f]=e[f]),f in c&&typeof c[f]===typeof this.params[f]&&(this.params[f]=c[f]));if(a.isObject(e.data))for(var g in e.data)this.params.data[g]=e.data[g];if(a.isObject(e.header))for(var h in e.header)this.params.header[h]=e.header[h];if(a.isString(c.data))this.params.data=
c.data;else if(a.isObject(c.data))for(var k in c.data)this.params.data[k]=c.data[k];if(a.isObject(c.header))for(var l in c.header)this.params.header[l]=c.header[l];this.success=a.isFunction(b)?b:function(){};this.error=a.isFunction(d)?d:function(){};this.request=null;if(a.isNull(window.XMLHttpRequest)){c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var w in c)try{this.request=new ActiveXObject(c[w])}catch(r){}}else this.request=new XMLHttpRequest};
a.ajax.prototype.parseResult=function(c,b){if(204===b.status)return"";var d=c.type.toLowerCase();return"json"===d?a.parser.json.parse(b.responseText):"xml"===d?b.responseXML:b.responseText};a.ajax.prototype.abort=function(){try{this.request.abort()}catch(c){}};
a.ajax.prototype.send=function(){var c=this.params.method.toUpperCase();if(!1===this.params.cache){var b=Math.floor(1E5*Math.random())+1;try{this.params.data.cachedisable=b}catch(d){}}b="";if(a.isString(this.params.data))b=this.params.data;else{for(var e in this.params.data)b+=encodeURIComponent(e)+"="+encodeURIComponent(this.params.data[e])+"&";b=b.slice(0,-1)}var f=this.params.url;e=this.params.async;"GET"===c&&""!==b&&(f+="?"+b);if(!0===e){var g={success:this.success,params:this.params,error:this.error,
request:this.request,parseResult:this.parseResult};this.request.onreadystatechange=function(){if(4===g.request.readyState){var b=200<=g.request.status&&400>g.request.status;b?g.success(g.parseResult(g.params,g.request),g.request.status):g.error(f,g.request.status);a.message.dispatch("a.ajax",{success:b,status:g.request.status,url:g.params.url,method:g.method,params:g.params})}}}this.request.open(c,f,e);var h=["Content-Type","Content-type","content-type"],k=!1,l;for(l in this.params.header)this.request.setRequestHeader(l,
this.params.header[l]),!k&&a.contains(h,l)&&(k=!0);k||"POST"!==c||this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.request.send(b);return!1===e?this.parseResult(this.params,this.request):"No return in async mode"};a.console=function(){function c(c,e,f,g){a.isArray(b[c])||(c="log");b[c].push(e);if(!a.isNull(window.console)&&a.isFunction(window.console.log)&&!1!==g)switch(a.environment.get("console")){case "error":if("error"!==c)break;case "warning":case "warn":if("warn"!==c&&"error"!==c)break;case "info":if("log"===c)break;default:g=!0;var h=!1;if(a.isString(e)&&0<=e.indexOf(":"))for(var k=e.substr(0,e.indexOf(":")).split("."),l=k.length;l--;){var w="verbose-"+k.join("."),w=a.environment.get(w);if(!a.isNull(w)){h=
!0;g=w<f?!1:!0;break}k.pop()}h||(a.isNull(a.environment.get("verbose"))||a.isNull(f))||parseInt(a.environment.get("verbose"),10)<f&&(g=!1);if(g)window.console[c](e)}for(;2E3<b[c].length;)b[c].shift()}var b={log:[],warn:[],info:[],error:[]};return{log:function(b,e,f){c("log",b,e,f)},warn:function(b,e,f){c("warn",b,e,f)},info:function(b,e,f){c("info",b,e,f)},error:function(b,e,f){c("error",b,e,f)},trace:function(c){return a.isString(c)&&c in b?b[c]:b},clear:function(){b={log:[],warn:[],info:[],error:[]}}}}();a.dom={query:function(c,b){b=a.isObject(b)?b:document;return!b.querySelectorAll&&window.jQuery?this.el(jQuery(c)):this.el(b.querySelectorAll(c))},el:function(c){if(window.jQuery&&c instanceof jQuery){for(var b=[],d=c.size();d--;)b.push(c.get(d));c=b}return a.isArray(c)?new this.children(c):new this.children([c])},id:function(c){return this.attr("id",c,document)},cls:function(c,b){return this.attr("class",c,b)},tag:function(c,b){b=a.isObject(b)?b:document;var d=a.isString(c)?c.replace(/ /g,"").split(","):
c,e=[],f=d.length;if(1<f){for(;f--;)for(var g=this.tag(d[f],b).getElements(),h=g.length;h--;)a.contains(e,g[h])||e.push(g[h]);return new a.dom.children(e)}e=b.querySelectorAll?b.querySelectorAll(c):b.getElementsByTagName(c);return new a.dom.children(e)},attr:function(c,b,d){function e(b,c){for(var d=c.length;d--;)a.contains(b,c[d])||b.push(c[d])}if(a.isNull(d)){a.isNull(b)&&(b=document);if(a.isObject(b))return this.attr(c,null,b);d=document}if(c&&(a.isArray(c)||0<=c.indexOf(","))){var f=a.isString(c)?
c.replace(/ /g,"").split(","):c,g=f.length;if(1<g){for(var h=[];g--;){var k=this.attr(f[g],b,d),k=k.getElements();e(h,k)}return new a.dom.children(h)}}if(b&&(a.isArray(b)||0<b.indexOf(","))&&(f=a.isString(b)?b.replace(/ /g,"").split(","):b,g=f.length,1<g)){for(h=[];g--;)k=this.attr(c,f[g],d),k=k.getElements(),e(h,k);return new a.dom.children(h)}f=a.isString(b);h=[];c=c.replace(/ /g,"");b=b.replace(/ /g,"");if("class"==c)h=d.getElementsByClassName(b);else if("id"==c)h=[d.getElementById(b)];else if(d.querySelectorAll)h=
d.querySelectorAll(f?"["+c+'="'+b+'"]':"["+c+"]");else for(d=d.getElementsByTagName("*"),g=d.length;g--;){var k=d[g],l=k.getAttribute(c);l&&(f&&l==b||!f)&&(a.contains(h,k)||h.push(k))}return new a.dom.children(h)}};a.dom.children=function(c){this.elementList=c="undefined"===typeof c.length?[c]:c;this.length=c.length};
a.dom.children.prototype={_perform:function(){var c=[],b=this.elementList,d=Array.prototype.slice.call(arguments),e=d[0],d=d.slice(1),f=d.length,g=b.length;for(d.push(null);g--;){d[f]=b[g];for(var h=e.apply(a.dom,d).getElements(),k=h.length;k--;)a.contains(c,h[k])||c.push(h[k])}this.elementList=c;this.length=c.length;return this},get:function(c){return this.elementList[c]||null},getElements:function(){return this.elementList},id:function(c){return this._perform(a.dom.id,c)},cls:function(c){return this._perform(a.dom.cls,
c)},addClass:function(c){this.each(function(){this.classList?this.classList.add(c):this.className.match(RegExp("(\\s|^)"+c+"(\\s|$)"))||(this.className+=" "+c)});return this},hasClass:function(c){c=RegExp("(\\s|^)"+c+"(\\s|$)");for(var b=this.elementList,d=b.length;d--;)if(!b[d].className.match(c))return!1;return!0},removeClass:function(c){this.each(function(b){this.classList?this.classList.remove(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)&&this.className.replace(b,""))},this);return this},
toggleClass:function(c){this.each(function(b){this.classList?this.classList.toggle(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)?this.className.replace(b,""):this.className+=" "+c)},this);return this},bind:function(c,b){var d=a.isString(c)?c.split(" "):c;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(c){document.addEventListener?this.addEventListener(c,b,!1):document.attachEvent?this.attachEvent("on"+c,b):this["on"+c]=b},d[i].toLowerCase());return this},unbind:function(c,b){var d=
a.isString(c)?c.split(" "):c;for(i=d.length;i--;)d[i]&&""!=d[i]&&this.each(function(c){document.removeEventListener?this.removeEventListener(c,b,!1):document.detachEvent?this.detachEvent("on"+c,b):this["on"+c]=void 0},d[i].toLowerCase());return this},tag:function(c){return this._perform(a.dom.tag,c)},attr:function(c,b){return this._perform(a.dom.attr,c,b)},attribute:function(c,b){if("undefined"===typeof b){for(var d=[],e=this.elementList,f=e.length;f--;)try{var g=e[f].getAttribute();a.isNull(g)||
a.contains(d,g)||d.push(g)}catch(h){}return d}this.each(function(){try{this.setAttribute(c,b)}catch(d){}});return this},data:function(c,b){return this.attribute("data-"+c,b)},parent:function(){for(var c=this.elementList,b=c.length;b--;)c[b]=c[b].parentNode;return this},insertBefore:function(c){this.each(function(){this.parentNode.insertBefore(c,this)});return this},insertAfter:function(c){this.each(function(){this.parentNode.insertBefore(c,this.nextSibling)});return this},empty:function(){this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)});
return this},remove:function(c){this.each(function(){try{this.parentNode.removeChild(c)}catch(b){}});return this},append:function(c){this.each(function(){this.appendChild(c)});return this},replace:function(c){this.empty();this.append(c);return this},each:function(){for(var c=this.elementList,b=Array.prototype.slice.call(arguments),d=b[0],b=b.slice(1),d=a.isFunction(d)?d:function(){},e=0,f=c.length;e<f;++e)d.apply(c[e],b);return this}};a.environment={_store:{verbose:2,console:"log"},get:function(c){return c in this._store?this._store[c]:null},set:function(c,b){a.isNull(c)||(this._store[c]=b,a.message.dispatch("a.environment.add",{key:c,value:b}))},remove:function(c){a.isNull(this._store[c])||(delete this._store[c],a.message.dispatch("a.environment.remove",{key:c}))},clear:function(){this._store={verbose:2,console:"log"}}};a.loader=function(){function c(b,c){if(a.isNull(b))return!1;for(var d=0,f=e.length;d<f;++d)if(e[d]===b)return a.isFunction(c)&&c(),!0;return!1}function b(b,c,d,g,r,t){for(var z in c)b.setAttribute(z,c[z]);!a.isNull(r)&&r.id&&b.setAttribute("id",r.id);var s=!1,v=function(c){s||(s=!0,a.isFunction(d)&&d(b),(a.isNull(r)||!1!==r.cache)&&e.push(g))};b.addEventListener?b.addEventListener("load",v,!1):b.readyState?b.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||v()}:
b.onload=v;if("text/css"===c.type){var p=document.styleSheets.length;f++;var m=a.timer.add(function(){document.styleSheets.length>p+f-1&&(f--,a.timer.remove(m),v())},null,50)}document.getElementsByTagName("head")[0].appendChild(b)}function d(b,c,d,f){var r={url:b,method:"GET",type:"raw",async:!0,cache:!0,data:{},header:{}};a.console.log("a.loader: load resource (url: "+b+")",3);a.isNull(d)||(a.contains(g,d.method)&&(r.method=d.method),a.isNull(d.type)||"json"!==d.type&&"xml"!==d.type||(r.type=d.type),
a.isObject(d.data)&&(r.data=d.data),a.isObject(d.header)&&(r.header=d.header),a.isBoolean(d.cache)&&(r.cache=d.cache));f=a.isFunction(f)?f:function(){};(new a.ajax(r,function(f,g){a.isFunction(c)&&c(f,g);(a.isNull(d)||!1!==d.cache)&&e.push(b)},f)).send()}var e=[],f=0,g="GET POST PUT DELETE HEAD OPTIONS".split(" ");return{js:function(b,d,e,f){c(b,d)||this.jsonp(b,d,e,f)},jsonp:function(c,d,e,f){var g=a.isObject(e)&&e.type?e.type:"text/javascript";a.console.log("a.loader: load resource (url: "+c+")",
3);b(document.createElement("script"),{type:g,src:c},d,c,e,f)},json:function(b,c,e,f){a.isObject(e)||(e={});e.type="json";a.isObject(e.header)||(e.header={});e.header.accept="application/json, text/javascript";d(b,c,e,f)},xml:function(b,c,e,f){a.isObject(e)||(e={});e.type="xml";a.isObject(e.header)||(e.header={});e.header.accept="application/xml, text/xml";d(b,c,e,f)},css:function(d,e,f,g){c(d,e)||(a.console.log("a.loader: load resource (url: "+d+")",3),b(document.createElement("link"),{rel:"stylesheet",
type:"text/css",href:d},e,d,f,g))},html:function(b,e,f,g){c(b,e)||(a.isObject(f)||(f={}),f.type="raw",!0===a.environment.get("debug")&&(f.cache=!1),a.isObject(f.header)||(f.header={}),f.header.accept="text/html",d(b,e,f,g))},javafx:function(b,d,e,f){if(a.isNull(e)||a.isNull(e.code)||a.isNull(e.id))a.console.warn("a.loader.javafx : the system need args.code and args.name setted to be able to load any javafx resource... This uri will not be loaded : "+b,3);else if(!c(b,d)){this.js("http://dl.javafx.com/"+
(e.version?e.version:"1.3")+"/dtfx.js",function(){javafx({archive:b,width:e.width||1,height:e.height||1,code:e.code,name:e.id})});var g=null,t=2E3,g=a.timer.add(function(){0<t--&&!a.isNull(document.getElementById(e.id).Packages)?(a.timer.remove(g),a.isFunction(d)&&d()):0>=t&&a.isFunction(f)&&f(b,408)},null,200)}},flash:function(b,d,e,f){a.isNull(e)||a.isNull(e.rootId)||a.isNull(e.id)?a.console.warn("a.loader.flash : the system need args parameters : rootId, id, setted to be able to load any flash resource... This uri will not be loaded : "+
b,3):c(b,d)||this.js(a.url+"vendor/storage/flash/swfobject.js",function(){swfobject.embedSWF(b,e.rootId,"100%","100%","10.0.0",a.url+"vendor/storage/flash/expressInstall.swf",e.flashvars,e.params,{id:e.id},function(c){!1===c.success&&a.isFunction(f)?f(b,408):!0===c.success&&a.isFunction(d)&&setTimeout(d,500)})})},silverlight:function(b,d,e,f){if(a.isNull(e)||a.isNull(e.rootId)||a.isNull(e.id))a.console.warn("a.loader.silverlight : the system need args parameters : rootId, id, setted to be able to load any silverlight resource... This uri will not be loaded : "+
b,3);else if(!c(b,d)){a.console.log("a.loader: load resource (url: "+b+")",3);var g=document.createElement("object");g.id=e.id;g.data="data:application/x-silverlight-2,";g.type="application/x-silverlight-2";a.isArray(e.params)||(e.params=[]);e.params.push({name:"source",value:b});for(var t=0,z=e.params.length;t<z;++t){var s=document.createElement("param");s.name=e.params[t].name;s.value=e.params[t].value;g.appendChild(s)}document.getElementById(e.rootId).appendChild(g);var v=null,p=2E3,v=a.timer.add(function(){0<
p--&&!a.isNull(document.getElementById(e.id).Content)?(a.timer.remove(v),d()):0>=p&&a.isFunction(f)&&f(b,408)},null,200)}},trace:function(){return e}}}();a.eventEmitter=function(){function c(c){for(var e in b.__list)1>b.__list[e].length&&delete b.__list[e]}var b=function(){this.__list={};this.__base="a.message"};b.prototype.setName=function(b){this.__base=""+b};b.prototype.addListener=function(b,c){a.isFunction(c)?(a.isNull(this.__list[b])&&(this.__list[b]=[]),this.__list[b].push(c),this.dispatch(this.__base+".add",{type:b,fct:c})):a.console.warn(this.__base+".addListener : unable to bind function, this is not a function",1)};b.prototype.add=b.prototype.on=
b.prototype.bind=b.prototype.addListener;b.prototype.addListenerOnce=function(b,c){var f=this,g=function(h){c(h);f.removeListener(b,g)};this.addListener(b,g)};b.prototype.once=b.prototype.onOnce=b.prototype.bindOnce=b.prototype.addListenerOnce;b.prototype.removeListener=function(b,e){if(!a.isNull(this.__list[b])){var f=this.__list[b].length;if(a.isFunction(e))for(;f--;)this.__list[b][f]===e&&this.__list[b].splice(f,1);this.dispatch(this.__base+".remove",{type:b,fct:e});c(b)}};b.prototype.remove=b.prototype.off=
b.prototype.unbind=b.prototype.removeListener;b.prototype.removeAllListeners=function(b){a.isNull(this.__list[b])||(this.__list[b]=[],c(b))};b.prototype.removeAll=b.prototype.offAll=b.prototype.unbindAll=b.prototype.removeAllListeners;b.prototype.clear=function(){var b=this.__base+".clear",c;for(c in this.__list)c!==b&&delete this.__list[c];this.dispatch(b,{})};b.prototype.dispatch=function(b,c){var f=this.__list[b];if(!a.isNull(f))for(var g=0,h=f.length;g<h;++g)(function(b){setTimeout(function(){b(c)},
0)})(f[g])};return b}();a.message=new a.eventEmitter;a.message.setName=function(){};a.parser={json:{stringify:function(c){try{return JSON.stringify(c)}catch(b){return a.console.error("a.parser.json.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),""}},parse:function(c){try{return JSON.parse(c)}catch(b){return a.console.error("a.parser.json.parse: unable to parse (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null}}},xml:{stringify:function(c){if(!a.isNull(c)&&!a.isNull(c.xml))return c.xml;
if(!a.isNull(window.XMLSerializer))try{return(new window.XMLSerializer).serializeToString(c)}catch(b){a.console.error("a.parser.xml.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1)}finally{return""}a.console.error("a.parser.xml.stringify: unable to find any parser available",1);return""},parse:function(c){if(!a.isNull(window.ActiveXObject)){for(var b=null,d=0;4>d;++d)try{b=new ActiveXObject(("MSXML2.DOMDocument."+(6-d)+".0")[d])}catch(e){}b.async=
!1;b.loadXML(c);return 0!=b.parseError.errorCode?(a.console.error("a.parser.xml.parse: unable to parse (value: "+c+", reason"+b.parseError.reason+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null):b}if(!a.isNull(window.DOMParser))return(new DOMParser).parseFromString(c,"text/xml");a.console.error("a.parser.xml.parse: unable to find any parser available",1);return null}}};a.timer=function(){var c={};setInterval(function(){a.message.dispatch("a.timer.tick",{});for(var b in c){var d=c[b];d.current+=50;d.current>=d.timeout&&(d.current=0,a.isFunction(d.fct)&&d.fct.call(d.scope||this))}},50);return{add:function(b,d,e){var f;for(f=Math.floor(1E6*Math.random());!a.isNull(c[f]);)f=Math.floor(1E6*Math.random());if(!a.isNumber(e)||0>=e)e=1E3,a.console.error("The timeout has not been setted properly into timer, timeout has been setted to 1000ms",1);c[f]={fct:b,scope:d,timeout:e,
current:0};return f},once:function(b,c,e){var f=this.add(function(){a.isFunction(b)&&b.call(this);a.timer.remove(f)},c,e);return f},get:function(b){b=c[b];return a.isNull(b)?null:b},remove:function(b){return delete c[b]},clear:function(){c={}}}}();a.callback={};
a.callback.synchronizer=function(){function c(){k--;0>=k&&!1===t?(r=!1,s.prototype.dispatch("a.callback.synchronizer.success",{}),l(z)):0>=k&&(r=t=!1)}function b(){!0===r&&(t=!0,r=!1,s.prototype.dispatch("a.callback.synchronizer.error",{}),w.apply(this,arguments))}function d(b,c){z[b]=c}function e(b){a.isObject(b)&&(z=b)}function f(b){return a.isNull(z[b])?null:z[b]}function g(){return z}var h=[],k=0,l=function(){return!0},w=function(){return!0},r=!1,t=!1,z={},s=function(){};s.prototype=new a.eventEmitter;
s.prototype.constructor=this;s.prototype.setSuccess=function(b){l=a.isFunction(b)?b:l};s.prototype.setDone=s.prototype.setSuccess;s.prototype.setFail=function(b){w=a.isFunction(b)?b:w};s.prototype.setError=s.prototype.setFail;s.prototype.addCallback=function(){for(var p=[],p=!a.isNull(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,m=0,q=p.length;m<q;++m){var x=p[m];a.isFunction(x)&&(k++,h.push(x),!0===r&&x({success:c,done:c,getData:f,getFullData:g,setData:d,setFullData:e,fail:b,error:b}))}!0===
r&&a.console.warn("a.callback.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",1)};s.prototype.removeCallback=function(b){for(var c=h.length-1;0<=c;--c)h[c]===b&&(!0===r&&a.console.warn("a.callback.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1),k--,h.splice(c,1))};s.prototype.start=function(p,m){if(0>=k)c();else{r=!0;z={};for(var q=0,x=h.length;q<x;++q)h[q]({success:c,done:c,getData:f,getFullData:g,setData:d,
setFullData:e,fail:b,error:b},m);a.isNumber(p)&&0<p?setTimeout(function(){var c=parseInt(p,10);s.prototype.dispatch("a.callback.synchronizer.error",{timeout:c});b({timeout:c})},p):s.prototype.dispatch("a.callback.synchronizer.start",{timeout:-1})}};s.prototype.isRunning=function(){return r};var v=new s;v.setName("a.callback.synchronizer");return v};
a.callback.chainer=function(){function c(){0==w.length?(w=[],k(r),t.prototype.dispatch("a.callback.chainer.success",{})):t.prototype.start(arguments)}function b(){w=[];l.apply(this,arguments);t.prototype.dispatch("a.callback.chainer.error",{})}function d(b,c){r[b]=c}function e(b){a.isObject(b)&&(r=b)}function f(b){return a.isNull(r[b])?null:r[b]}function g(){return r}var h=[],k=function(){return!0},l=function(){return!0},w=[],r={},t=function(){};t.prototype=new a.eventEmitter;t.prototype.constructor=
this;t.prototype.setSuccess=function(b){k=a.isFunction(b)?b:k};t.prototype.setDone=t.prototype.setSuccess;t.prototype.setFail=function(b){l=a.isFunction(b)?b:l};t.prototype.setError=t.prototype.setFail;t.prototype.addCallback=function(){for(var b=[],b=!a.isNull(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,c=0,d=b.length;c<d;++c){var e=b[c];a.isFunction(e)&&(h.push(e),!0===t.prototype.isRunning()&&w.push(e))}!0===t.prototype.isRunning()&&a.console.warn("a.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",
1)};t.prototype.removeCallback=function(b){for(var c=h.length-1;0<=c;--c)if(h[c]===b){if(!0===t.prototype.isRunning()){for(var d=w.length-1;0<=d;--d)w[d]===b&&w.splice(d,1);a.console.warn("a.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1)}h.splice(c,1)}};t.prototype.start=function(){if(0==w.length){for(var l=0,k=h.length;l<k;++l)w.push(h[l]);t.prototype.dispatch("a.callback.chainer.start",{});r={};0==w.length&&c()}l=w.shift();a.isFunction(l)&&l({success:c,
done:c,getData:f,getFullData:g,setData:d,setFullData:e,fail:b,error:b},arguments)};t.prototype.isRunning=function(){return 0==w.length?!1:!0};var z=new t;z.setName("a.callback.chainer");return z};a.form=function(){function c(b,c){return a.isNull(b.getAttribute)?null:b.getAttribute(c)}function b(b){for(var c=[],d=b.length;d--;)c.push(b[d]);return c}function d(b){var d=c(b,"name");if(a.isNull(d)||""===d)if(d=c(b,"id"),a.isNull(d)||""===d)d=c(b,"class");return d}function e(d){var e=d.getElementsByTagName("input"),f=d.getElementsByTagName("textarea");d=d.getElementsByTagName("select");for(var e=b(e),g=e.length;g--;){var h=c(e[g],"type");a.contains(l,h)||a.isNull(h)||e.splice(g,1)}return e.concat(b(f),
b(d))}function f(b,d,e,f){var g="";a.isNull(e)||""===e||(g=c(b,"data-error-"+e));if(a.isNull(g)||""===g)g=c(b,"data-error");(a.isNull(g)||""===g)&&a.console.warn("A data-error tag has not been setted for "+d+" with value "+f+", can't proceed error show",3);a.isNull(a.language)||(g=a.language.getSingleTranslation(g,{name:e,value:f}));return{el:b,id:d,error:g}}var g="text search url tel email password".split(" "),h="number range date datetime datetime-local month time week".split(" "),k=g.concat(h,
["number","checkbox","radio","file"]),l=h.concat(g,["color","checkbox","file","hidden","radio"]);return{skipNoValidate:!1,get:function(b){b=e(b);for(var f={},g=b.length;g--;){var h=b[g],l=d(h),k;k=h;var p=c(k,"type"),m=k.tagName.toLowerCase();k="input"===m||"textarea"===m?"checkbox"===p?k.checked:k.value:"select"===m?k.options[k.selectedIndex].value:void 0;null!==l&&""!==l&&(a.isNull(h)||"radio"!==c(h,"type")?f[l]=""===k?null:k:h.checked&&(f[l]=""===k?null:k))}a.console.log("a.form.get: found element list:",
3);a.console.log(f,3);return f},validate:function(b){if(!a.isNull(c(b,"novalidate"))&&!1===this.skipNoValidate)return[];b=e(b);for(var l=[],t="number range text search url email password color checkbox hidden radio".split(" "),z=RegExp("^[a-z]{2,}:\\/\\/([a-z0-9\\/\\.\\-_~+;:&=]{2,})$","gi"),s=RegExp("^.{2,}@.*\\.[a-z0-9]{2,}$","gi"),v=RegExp("^#([a-f]{3}|[a-f]{6})$","gi"),p=b.length;p--;){var m=b[p],q=m.tagName.toLowerCase();if("select"!==q&&a.isNull(c(m,"formnovalidate"))){var x=c(m,"type"),u=d(m),
n=m.value,A=c(m,"required"),y=c(m,"pattern");c(m,"multiple");var F=c(m,"min"),C=c(m,"max"),D=c(m,"step"),F=a.isNull(F)||""===F?null:parseFloat(F),C=a.isNull(C)||""===C?null:parseFloat(C),D=a.isNull(D)||""===D?null:parseFloat(D);"input"!==q||a.contains(t,x)||a.isNull(x)?"number"!==x&&"range"!==x||a.isNumber(n)?"url"!==x||z.test(n)?"email"!==x||s.test(n)?"color"!==x||v.test(n)?null!==A&&a.contains(k,x)&&(""===n||a.isNull(n))?l.push(f(m,u,"required",n)):null===y||"textarea"!==q&&!a.contains(g,x)&&!a.isNull(x)||
RegExp(y).test(n)?null===F&&null==C&&null==D||!a.contains(h,x)||(q=parseFloat(n),null!==F&&q<F?l.push(f(m,u,"min",n)):null!==C&&q>C?l.push(f(m,u,"max",n)):null!==D&&0!==q%D&&l.push(f(m,u,"step",n))):l.push(f(m,u,"pattern",n)):l.push(f(m,u,null,n)):l.push(f(m,u,null,n)):l.push(f(m,u,null,n)):l.push(f(m,u,null,n)):a.console.warn("Type "+x+" for input "+u+" not recognized or not supported",3)}}a.console.log("a.form.validate: found error list:",3);a.console.log(l,3);return l},validateAndGet:function(b){b=
{errorList:this.validate(b),error:!1,contentList:this.get(b)};0<b.errorList.length&&(b.error=!0);return b}}}();a.keyboard=function(c){return a.isNull(c)?(a.console.error("a.keyboard.global: error, Mousetrap is undefined, the plugin a.keyboard will not work",1),{addListener:function(){},removeListener:function(){},reset:function(){},clear:function(){}}):{addListener:function(b,d){a.console.log("a.keyboard.addListener: bind key: "+b,3);c.bind(b,d)},removeListener:function(b){a.console.log("a.keyboard.removeLister: remove listener on key: "+b,3);c.unbind(b)},reset:function(){a.console.log("a.keyboard.reset: clear all keys",
3);c.reset()},clear:function(){a.console.log("a.keyboard.clear: clear all keys",3);c.reset()}}}(window.Mousetrap);a.language=function(){function c(b,c){if(a.isNull(k[b]))return null;var d=k[b][c];if(a.isNull(d))a.console.info("a.language.__getRawTranslate: unable to find hash in dictionnary (value: "+c+", language: "+b+")",3);else return d;return null}function b(b){b=""+b;0>b.indexOf("{{")&&(b="{{"+b+"}}");b=b.replace("{{","\\{\\{");return b=b.replace("}}","\\}\\}")}function d(d,e){var f=c(g,d);if(!a.isNull(f)){var h=f;if(a.isArray(e))for(var l=0,n=e.length;l<n;++l)var k=b(l+1),k=RegExp(k,"gi"),h=h.replace(k,
e[l]);else for(l in e)k=b(l),k=RegExp(k,"gi"),h=h.replace(k,e[l]);if(0<=h.indexOf("{{")&&0<=h.indexOf("}}"))for(f=f.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],l=0,n=f.length;l<n;++l){var k=b(f[l]),y=f[l].replace("{{","").replace("}}",""),y=a.isNull(t[y])?null:t[y];a.isNull(y)||(k=RegExp(k,"gi"),h=h.replace(k,y))}return h=h.replace(/\{\{[a-z\-_0-9]+\}\}/gi,"")}return d}function e(b,c){a.isString(c)||(c=w);try{return b.getAttribute(c)}catch(d){return null}}function f(b){a.isNull(b)&&(b=document);var f=[];
a.isNull(e(b))||f.push(b);var h=[];b.querySelectorAll?(h=b.querySelectorAll("*["+w+"]"),0===h.length&&(h=b.querySelectorAll("*"))):h=b.getElementsByTagName("*");b=0;for(var k=h.length;b<k;++b)a.isNull(e(h[b]))||f.push(h[b]);h=0;for(b=f.length;h<b;++h){var u=f[h],k=e(u);if(!a.isNull(k)){var n=c(g,k),A={};a.isNull(n)&&(n=k);for(var n=n.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],y=0,z=n.length;y<z;++y){var s=n[y].replace("{{","").replace("}}",""),v=e(u,w+"-"+s);a.isNull(v)?(v="undefined"===t[s]?null:t[s],a.isNull(v)||
(A[s]=v)):A[s]=v}n=d(k,A);k=e(u,r);if(!a.isNull(k))try{u[k]=n}catch(B){}else if(u)if("INPUT"!==u.nodeName||"submit"!==u.type&&"reset"!==u.type)if("INPUT"===u.nodeName)try{u.placeholder=n}catch(I){}else if("FIELDSET"===u.nodeName)u.title=n;else if(!a.isNull(u.text)&&document.all)u.text=n;else if(a.isNull(u.childNodes))u.innerHTML=n;else if(k=u.childNodes.length,A=document.createTextNode(n),"leave"===l){for(n=!1;k--;)y=u.childNodes[k],3===y.nodeType&&(n||(u.insertBefore(A,y),n=!0),u.removeChild(y));
n||u.appendChild(A)}else{for(;k--;)u.removeChild(u.firstChild);u.appendChild(A)}else u.value=n}}}var g="en",h=["en","fr","de","sp"],k={},l="leave",w="data-tr",r="data-tr-attr",t={},z=!a.isNull(a.storage)&&!0===a.storage.persistent.support;if(z){var s=a.storage.persistent.getItem("a_language_store_language"),v=a.storage.persistent.getItem("a_language_store_allowed");a.isString(s)&&(g=s,f(document));a.isArray(v)&&(h=v)}return{setBehavior:function(b){l="erase"===b?"erase":"leave"},getBehavior:function(){return l},
getCurrent:function(){return g},setCurrent:function(b,c){!a.isString(b)||0>=b.length?a.console.error("a.language.setCurrent: setting a non-string lang, or empty string, as default language: "+b,1):(a.isNull(c)&&(c=!0),a.contains(h,b)||a.console.warn("a.language.setCurrent: unable to find language in available language list (value: "+b+", available: "+h.join(";")+")",2),g=b,a.isNull(k[g])&&(k[g]={}),a.console.log("a.language.setCurrent: set current language to "+g+", request update ? "+c,3),a.message.dispatch("a.language.change",
{value:g}),z&&a.storage.persistent.setItem("a_language_store_language",g),this.translate(document,c))},getAllowed:function(){return h},setAllowed:function(b){a.isString(b)&&(b=[b]);if(a.isArray(b)){h=b;var c=0;for(b=b.length;c<b;++c)a.isNull(k[c])&&(k[c]={});z&&(a.console.log("a.language.setAllowed: set allowed language to "+h,3),a.storage.persistent.setItem("a_language_store_allowed",h))}else a.console.error("a.language.setAllowed: the allowed language must be an Array (value: "+b+")",1)},getSingleTranslation:function(b,
c){return d(b,c)},addSingleTranslation:function(b,c,d,e){a.isNull(k[b])&&(a.console.warn("a.language.addSingleTranslation: be carefull, the language you submit does not seems to exist in dict (value: "+b+", dict: "+h.join(";")+")",1),k[b]={});k[b][c]=d;this.translate(document,e)},addTranslation:function(b,c,d){a.isNull(k[b])&&(k[b]={});for(var e in c)k[b][e]=c[e];this.translate(document,d)},getTranslation:function(b){return a.isString(b)?k[b]:k},translate:function(b,c){!1!==c&&f(b)},addVariable:function(b,
c){a.console.log("a.language.addVariable: add global variable (key: "+b+", value: "+c+")",3);t[b]=c},getVariable:function(b){return"undefined"===t[b]?null:t[b]},removeVariable:function(b){a.console.log("a.language.removeVariable: remove global variable (key: "+b+")",3);delete t[b]},clear:function(){k={}}}}();a.page={};
a.page.template={__tmpl:{},get:function(c,b,d,e){var f=null;a.isObject(window.Mustache)?f=window.Mustache:a.isObject(window.Handlebars)&&(f=window.Handlebars);if(null==f)a.console.error("a.page.template.get: unable to find Mustache.JS or Handlebars.JS ! Can't proceed",1);else{var g=c.replace(/[^a-zA-Z0-9\\-]/g,"_"),h="a_tmpl_"+g+"_a",k=function(b,c,d){a.isFunction(b)&&(a.isNull(f.to_html)?(c=f.compile(a.page.template.__tmpl[c]),b(c(d))):b(f.to_html(a.page.template.__tmpl[c],d)))};a.isString(this.__tmpl[h])?(a.console.log("a.page.template.get: loading "+
h+" from cache",3),k(d,h,b)):document.getElementById(h)?(this.__tmpl[h]||(a.console.log("a.page.template.get: loading "+h+" from inner html page",3),this.__tmpl[h]=document.getElementById(h).innerHTML),k(d,h,b)):document.getElementById(g)?(this.__tmpl[g]||(a.console.log("a.page.template.get: loading "+g+" from inner html page",3),this.__tmpl[g]=document.getElementById(g).innerHTML),k(d,g,b)):(a.console.log("a.page.template.get: loading "+c+" from external resource",3),a.loader.html(c,function(c,e,
f){a.page.template.__tmpl[h]||(a.page.template.__tmpl[h]=c);k(d,h,b)},{},e))}},htmlToDom:function(c){var b=document.createElement("div");b.innerHTML=c.replace(/^\s+|\s+$/g,"");c=b.childNodes;for(var b=[],d=0,e=c.length;d<e;++d){var f=c.item(d);!a.isObject(f)||"1"!==f.nodeType.toString()&&"3"!==f.nodeType.toString()||b.push(f)}return b},remove:function(c,b){for(;c.firstChild;)c.removeChild(c.firstChild);a.isFunction(b)&&b()},append:function(c,b,d){var e=this.htmlToDom(b);if(a.isObject(e))for(var f=
0,g=e.length;f<g;++f)c.appendChild(e[f]);a.isNull(a.language)||a.language.translate(c);a.isFunction(d)&&d(b)},replace:function(c,b,d){this.remove(c);this.append(c,b,d)}};
a.page.event=function(){function c(b,c){a.isObject(c)||(c={});return function(){a.message.dispatch("a.page.event."+b,c)}}function b(){var b=(new Date).getTime();b>h+2*g&&(a.console.log("a.page.event.hibernate: hibernate mode has been detected",3),c("hibernate")());h=b}function d(b,c){window.addEventListener?window.addEventListener(b,c,!1):window.attachEvent&&window.attachEvent("on"+b,c)}function e(b){var d=window.location.hash?window.location.hash.substring(1):null;if(k!==d){if(!0!==b){for(l.push({hash:d,
time:(new Date).getTime()});1E3<l.length;)l.shift();a.console.log("a.page.event.hash: hash change (previous: "+k+", new: "+d+")",3);c("hash",{value:d,old:k})()}k=d}}var f={},g=1E4,h=(new Date).getTime(),k=null,l=[];f.hash={getHash:function(){return window.location.hash?window.location.hash.substring(1):null},getPreviousHash:function(){return k},setPreviousHash:function(b){a.console.log("a.page.event.hash.setPreviousHash: change previous hash to "+b,3);k=b},trace:function(){return l}};e(!0);!a.isNull(window.onhashchange)&&
(void 0===document.documentMode||7<document.documentMode)?window.onhashchange=e:a.timer.add(e,null,50);var w=["resize","load","unload"],r;for(r in w)d(w[r],c(w[r]));d("load",function(){a.timer.add(b,null,g)});return f}();a.state=function(){function c(b){return a.isArray(b)?b.reverse():a.isString(b)?[b]:[]}function b(){for(var b=v;v===b||0>=v;)v=Math.floor(1E5*Math.random());return v}function d(b,c){var d=[],e=b.length;c=a.isFunction(c)?c:function(){return!0};for(var f=0;f<e;++f){for(var g=!1,h=0;h<e;++h)if(f!=h&&b[f].id===b[h].id&&c(b[f])){g=!0;break}g||d.push(b[f].id)}return d}function e(b){for(var c=0,d=[],e=a.state.helper.tree.selectLevel(b,l,c);0<e.length;)d.push(e),c++,e=a.state.helper.tree.selectLevel(b,l,c);
return d}function f(b){b=g(b);for(var c=s.length,d=[];c--;){for(var e=s[c].hashtagList,f=e.length,h=!1;f--&&(h=b({hash:e[f]}),!0!==h););h||(d=d.concat(s[c].itemList.slice()),s.splice(c,1))}return d}function g(b){return function(c){if(a.isObject(c)&&0<c.hash.length){if(c.hash===b)return!0;if(0<=c.hash.indexOf("{{")&&0<=c.hash.indexOf("}}")){var d=a.state.helper.parameter.extract(c.hash);c=c.hash;for(var e=d.length;e--;)c=a.state.helper.parameter.replace(c,d[e]);return RegExp("^"+c+"$","gi").test(b)}}return!1}}
function h(b){return function(c){return a.isObject(c)&&(a.isArray(b)&&a.contains(b,c.id)||c.id===b)?!0:!1}}function k(b,c){var d=h(c),e=g(b);return function(b){return!0===d(b)||!0===e(b)?!0:!1}}function l(b){return a.isObject(b)&&a.isArray(b.children)?b.children:[]}function w(b){return a.isObject(b)?b.id:-1}function r(b){return a.isObject(b)&&a.isObject(b.error)?b.error:null}function t(c){var h=a.clone(z),x=a.clone(z),u=a.clone(z),n=f(c.value),A=g(c.old),n=k(c.old,n),y=g(c.value);a.state.helper.tree.selectBranch(h,
l,n);a.state.helper.tree.selectBranch(x,l,y);a.state.helper.tree.selectBranch(u,l,g("*"));var n=a.state.helper.tree.flat(h.concat(x),l),p=d(n,function(b){return 0<=b.hash.indexOf("{{")&&0<=b.hash.indexOf("}}")&&!a.state.helper.tree.isInBranch(b,l,y)&&!a.state.helper.tree.isInBranch(b,l,A)?!1:!0}),r=a.state.helper.tree.flat(u,l,w),h=e(h),s=e(x);a.message.dispatch("a.state.begin",c);a.console.log("a.state: element allowed to proceed change: "+p+" (does not mean all of them will be loaded)",3);var t=
b();a.state.helper.chainer("unload",h,p,-1,function(){a.state.helper.chainer("load",s,p,t,function(){0<u.length?(u=[u],a.console.log("a.state: wildcard allowed to proceed change: "+r+" (does not mean all of them will be loaded)",3),a.state.helper.chainer("unload",u,r,-1,function(){a.state.helper.chainer("load",u,r,-1,function(){a.message.dispatch("a.state.end",c)})})):a.message.dispatch("a.state.end",c)})})}var z=[],s=[],v=-1,p=[];a.message.addListener("a.page.event.hash",t);a.message.addListener("a.message.clear",
function(){a.message.addListener("a.page.event.hash",t)});return{clear:function(){z=[]},tree:function(){return a.clone(z)},add:function(b,d){if(!a.isObject(b))return null;if(a.isArray(b))for(var e=0,f=b.length;e<f;++e)this.add(b[e]);else{b.hash=a.isString(b.hash)?b.hash:"";a.isObject(b.include)||(b.include={});b.include.css=c(b.include.css);b.include.js=c(b.include.js);b.include.translate=c(b.include.translate);b.include.html=a.isString(b.include.html)?b.include.html:null;for(var g=["preLoad","postLoad",
"preUnload","unload","postUnload"],k=0,e=g.length;k<e;++k)f=b[g[k]],a.isFunction(f)&&(f=f.toString(),f=f.slice(f.indexOf("(")+1,f.indexOf(")")).match(/([^\s,]+)/g),a.isNull(f)&&a.console.warn("The result parameter for function '"+g[k]+"' in id '"+b.id+"' has not been found, the state may not work properly",2));!a.isArray(b.children)&&a.isObject(b.children)&&(b.children=[a.clone(b.children)]);k=!a.isNull(b.parent);e=a.isArray(b.children);"*"===b.hash&&(k&&a.console.warn("a.state.add : The wildcard has a parent setted (not allowed)",
1),e&&a.console.warn("a.state.add : The wildcard has children (not allowed)",1),b.parent=null,k=!1,b.children=[]);g=[];e&&(g=b.children.slice());b.children=[];a.isNull(b.id)&&(b.id=1);for(;!a.isNull(a.state.helper.tree.getItem(z,l,h(b.id)));)b.id=Math.floor(1E5*Math.random()+1);if(k){k=a.state.helper.tree.getItem(z,l,h(b.parent));if(a.isNull(k))return null;k.children.push(b)}else z.push(b);k=b.id;e=0;for(f=g.length;e<f;++e)a.isObject(g[e])&&(g[e].parent=k,this.add(g[e]));"*"===b.hash&&a.state.helper.chainer("load",
[[b]],[k],-1,function(){});!0===b.bootOnLoad&&(g=a.clone(b),g.data=g.converter=g.options=null,g.preLoad=g.load=g.postLoad=null,g.preUnload=g.unload=g.postUnload=null,d=a.isFunction(d)?d:function(){},a.state.helper.chainer("load",[[g]],[k],-1,d));return k}},getById:function(b){return a.state.helper.tree.getItem(z,l,h(b))},removeById:function(b){var c=a.state.helper.tree.getItem(z,l,h(b));a.console.log("a.state.removeById: remove element (id: "+b+")",3);a.state.helper.tree.selectBranch(z,l,function(b){return b===
c?!1:!0})},loadById:function(b,f,k){var u=a.clone(z),n=a.page.event.hash.getHash(),p=a.clone(z);a.state.helper.tree.selectBranch(u,l,h(b));a.state.helper.tree.selectBranch(p,l,g(n));var y=a.state.helper.tree.flat(u,l),p=a.state.helper.tree.flat(p,l),p=d(p.concat(y)),u=e(u);k=a.isFunction(k)?k:function(){};a.console.log("a.state.loadById: element allowed to proceed change: "+p+" (does not mean all of them will be loaded)",3);a.state.helper.chainer("load",u,p,-1,k);a.isNull(f)&&(f=n);b={id:b,itemList:a.state.helper.tree.flat(y,
l,w),hashtagList:c(f)};s.push(b)},unloadById:function(b,c){for(var d=this.getById(b),d=e([d]),f=[],g=s.length;g--;)f=f.concat(s[g].itemList);a.console.log("a.state.unloadById: element allowed to proceed change: "+f+" (does not mean all of them will be unloaded)",3);g=a.isFunction(c)?c:function(){};a.state.helper.chainer("unload",d,f,-1,g)},forceReloadById:function(c,d){for(var f=a.isFunction(d)?d:function(){},h=s.length,k=[],p=a.clone(s);h--;)a.contains(s[h].itemList,c)&&k.push(s[h].hashtagList);
if(0<k.length)this.unloadById(c,function(){for(var b=k.length;b--;)a.state.loadById(c,k[b]);s=p;f()});else{var h=a.clone(z),y=a.page.event.hash.getHash();a.state.helper.tree.selectBranch(h,l,g(y));for(var y=a.state.helper.tree.flat(h,l),r=y.length;r--;)if(y[r].id===c){var t=e([y[r]]),v=a.state.helper.tree.flat(h,l,w);a.console.log("a.state.forceReloadById: element allowed to proceed change: "+v+" (does not mean all of them will be loaded/unloaded)",3);var B=b();a.state.helper.chainer("unload",t,v,
-1,function(){a.state.helper.chainer("load",t,v,B,f)});break}}},hashExists:function(b){return a.isString(b)&&""!==b?a.state.helper.tree.isInBranch(z,l,g(b)):!1},__currentGeneratedId:function(){return v},__getError:function(b,c){var d=b.id;c="_"+c;var e=a.clone(z);a.state.helper.tree.selectBranch(e,l,h(d));for(var d=a.state.helper.tree.flat(e,l,r),e=[c,c.substring(0,c.length-1)+"x",c.substring(0,c.length-2)+"xx","generic","_generic"],f=0,g=e.length;f<g;++f){var k;a:{k=e[f];for(var p=d.length;p--;){var s=
d[p];if(!a.isNull(s))for(var t in s)if(t==k){k=s[t];break a}}k=null}if(!a.isNull(k))return k}return null},type:{add:function(b,c){p[b]=c},get:function(b){return a.isFunction(p[b])?p[b]:null},list:function(){return p}},helper:{tree:{},chainer:{},parameter:{}}}}();
a.state.helper.tree={flat:function(c,b,d){var e=[];if(!a.isArray(c)||!a.isFunction(b))return[];d=a.isFunction(d)?d:function(b){return b};for(var f=0,g=c.length;f<g;++f){var h=this.flat(b(c[f]),b,d);e.push(d(c[f]));0<h.length&&(e=e.concat(h))}return e},getItem:function(c,b,d){if(!a.isArray(c)||!a.isFunction(d)||!a.isFunction(b))return null;for(var e=0,f=c.length;e<f;++e){if(!0===d(c[e]))return c[e];var g=this.getItem(b(c[e]),b,d);if(!a.isNull(g))return g}return null},isInBranch:function(c,b,d){c=this.getItem(c,
b,d);return a.isNull(c)?!1:!0},selectBranch:function(c,b,d){if(a.isArray(c)&&a.isFunction(b)&&a.isFunction(d))for(var e=c.length;e--;){var f=b(c[e]);!1===d(c[e])&&a.isNull(this.getItem(f,b,d))?c.splice(e,1):0<f.length&&this.selectBranch(f,b,d)}},selectLevel:function(c,b,d){if(!a.isArray(c)||!a.isFunction(b))return[];var e=[],f=c.length;if(a.isNull(d)||isNaN(d)||0>=d)return c;for(d--;f--;){var g=b(c[f]);0<g.length&&(e=e.concat(this.selectLevel(g,b,d)))}return e}};
a.state.helper.chainer=function(c,b,d,e,f){function g(b,c){var d={};a.isNull(b)||(d.resource=b);a.isNull(c)||(d.status=c);var e=a.state.__getError(v,c);a.message.dispatch("a.state.error",d);a.isNull(e)||(a.isString(e)?window.location.href="#"+e:a.isFunction(e)?e(v.id,b,c):a.console.error("a.state.helper.chainer.__error: error resolver cannot determine action to perform, please check your different error handler (status: "+c+", state id: "+v.id+")"))}function h(b){return function(c){z(b,function(){c.done()})}}
function k(b,c,d){return function(e){a.loader[b](c,function(b){a.isFunction(d)&&d(b);e.done()})}}function l(b,c,d){if(a.isObject(d))for(var e in d)d[e]=a.state.helper.parameter.extrapolate(d[e],b,c),l(b,c,d[e])}function w(b,c,d,e){var f=a.clone(d);d=a.page.event.hash.getHash();f.url=a.state.helper.parameter.extrapolate(c,d,e);l(d,e,f);c=c.replace(/^\s+|\s+$/g,"");return 0===c.indexOf("{{")&&c.indexOf("}}")===c.length-2?(c=a.state.helper.parameter.extrapolate(c,d,e,!1),function(d){var e=d.getData("data")||
{};a.isObject(e.a)||(e.a=e.appstorm={},e.a.parameter=e.appstorm.parameter={});a.isNull(b)?e=c:(e.a.parameter[b]=c,e.appstorm.parameter=e.a.parameter,a.isNull(e[b])&&(e[b]=c));d.setData("data",e);d.done()}):function(c){a.isNull(c.getData("data"))&&c.setData("data",{});(new a.ajax(f,function(d){if(a.isNull(b))c.setData("data",d);else{var e=c.getData("data");e[b]=d;c.setData("data",e)}c.done()},g)).send()}}function r(b,c){for(var d=new a.callback.synchronizer,e=b.include.css,f=b.include.js,h=b.include.html,
m=b.include.translate,l=b.data,p=b.title,r=b.options,s=b.converter,t=b.hash,v=e.length,z=f.length;v--;)d.addCallback(k("css",e[v]));for(;z--;)d.addCallback(k("js",f[z]));if(!a.isNull(a.language)&&0<m.length)for(e=m.length;e--;)d.addCallback(k("json",m[e],function(b){for(var c in b)a.language.addTranslation(c,b[c],!0)}));a.isString(h)&&(h=a.state.helper.parameter.extrapolate(h,a.page.event.hash.getHash(),t),d.addCallback(function(b){b.setData("html",h);a.page.template.get(h,{},b.done,g)}));if(a.isString(l)||
a.isObject(l))if(a.isObject(r)||(r={type:"json"}),a.isString(r.type)||(r.type="json"),a.isString(l))d.addCallback(w(null,l,r,t));else for(var G in l)a.isObject(l[G])&&a.isString(l[G].url)?(a.isObject(l[G].options)||(l[G].options={type:"json"}),d.addCallback(w(G,l[G].url,l[G].options,t))):d.addCallback(w(G,l[G],r,t));else d.addCallback(function(b){b.setData("data",{});b.done()});d.setSuccess(function(b){a.isNull(s)||s(b.data);a.isNull(p)||(p=a.state.helper.parameter.extrapolate(p,a.page.event.hash.getHash(),
t),a.isNull(a.language)?document.title=p:document.title=a.language.getSingleTranslation(p));var d=b.data,e=b.html,d=a.isNull(d)?{}:d;a.isNull(e)?a.isFunction(c)&&c(b,null):a.page.template.get(e,d,function(d){a.isFunction(c)&&c(b,d)})});d.setFail(g);d.start()}function t(b,d){v=b;var f=new a.callback.chainer;"unload"===c?f.addCallback(b.preUnload,b.unload,b.postUnload):f.addCallback(function(c){a.isFunction(b.preLoad)&&(-1==e||0<=e&&a.state.__currentGeneratedId()===e)?b.preLoad(c):c.done()},function(c){r(b,
function(d,f){a.isFunction(b.load)&&(-1==e||0<=e&&a.state.__currentGeneratedId()===e)&&b.load(f);var g=c.getFullData()||{};if(a.isObject(d.data))for(var h in d.data)g[h]=d.data[h];c.setFullData(g);c.done()})},function(c){a.isFunction(b.postLoad)&&(-1==e||0<=e&&a.state.__currentGeneratedId()===e)?b.postLoad(c):c.done()},function(c){var d={id:b.id,value:b.id};a.message.dispatch("a.state.load",d);a.message.dispatch("a.state.load-"+b.id,d);c.done()});f.setSuccess(d);f.setFail(g);f.start()}function z(b,
c){for(var e=new a.callback.synchronizer,f=b.length;f--;)a.contains(d,b[f].id)&&function(b){e.addCallback(function(c){t(b,function(){c.done()})})}(b[f]);e.setSuccess(c);e.setFail(g);e.start()}var s=b.length,v=null;c="unload"===c?"unload":"load";d=d||[];var p=new a.callback.chainer;if("unload"===c)for(;s--;)p.addCallback(h(b[s]));else for(var m=0;m<s;)p.addCallback(h(b[m])),m++;p.setSuccess(f);p.setFail(g);p.start()};
a.state.helper.parameter={extract:function(c,b){var d=/\{\{(\s*\w+\s*:\s*[a-z0-9_\-\[\]\(\)\^.\|\+\*\?\\\/]+\s*)\}\}/gmi,e=/^\s+|\s+$/g,f=!a.isNull(b);f&&(d=b);for(var g=[],h;h=d.exec(c);){var k=null,k=f?["hash",h[1]]:h[1].split(":",2);g.push({original:h[0].replace(e,""),name:k[0].replace(e,""),regex:k[1].replace(e,""),start:h.index})}return g},replace:function(c,b,d){d=a.isNull(d)?"("+b.regex+")":d;return c.substr(0,b.start)+d+c.substr(b.start+b.original.length)},extrapolate:function(c,b,d,e){if(a.isString(c)&&
0<=c.indexOf("{{")&&0<=c.indexOf("}}")){for(var f=this.extract(c),g=this.extract(d),h=this.extract(c,/\{\{(\s*\w+\s*)\}\}/gmi),f=f.concat(h),h=g.length;h--;)d=this.replace(d,g[h]);if(h=RegExp("^"+d+"$","gi").exec(b)){b=0;for(d=g.length;b<d;++b)g[b].value=h[b+1];for(var h=0,k=f.length;h<k;++h)for(b=0;b<d;++b)g[b].name===f[h].regex&&"hash"===f[h].name&&(f[h].value=g[b].value)}g=f.length;for(e=!1===e?function(b,c,d){return d}:this.replace;g--;){b=f[g];"hash"!==b.name&&"hashtag"!==b.name||a.isNull(b.value)||
(c=this.replace(c,b,b.value));d=!1;if(!a.isNull(a.storage))switch(b.name){case "temporary":c=e(c,b,a.storage.temporary.getItem(b.regex));d=!0;break;case "memory":c=e(c,b,a.storage.memory.getItem(b.regex));d=!0;break;case "persistent":c=e(c,b,a.storage.persistent.getItem(b.regex));d=!0;break;case "cookie":c=e(c,b,a.storage.cookie.getItem(b.regex));d=!0;break;case "store":case "storage":d=a.storage.temporary.getItem(b.regex),c=a.isNull(d)?e(c,b,a.storage.persistent.getItem(b.regex)):e(c,b,d),d=!0}if(!d&&
(d=a.state.type.list(),a.isObject(d)))for(var l in d)l===b.name&&(h=d[l],c=a.isFunction(h)?e(c,b,h(b.regex)):e(c,b,h))}}return c}};a.storage={__printGetItem:function(c,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: get element (key: "+b+", value: "+d+")",3)},__printGetErrorItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: unable to find key ("+b+") in store",2)},__printSetItem:function(c,b,d){"__test_support"!==b&&a.console.log("a.storage.type."+c+".setItem: add element (key: "+b+", value: "+d+")",3)},__printRemoveItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+
c+".removeItem: remove element (key: "+b+")",3)},type:{}};
a.storage.type.cookie=function(){var c=!1,b={support:!1,engine:"cookie",setItem:function(b,c,f){var g="";a.storage.__printSetItem("cookie",b,c);f&&(g=new Date,g.setTime(g.getTime()+864E5*f),g="; expires="+g.toGMTString());document.cookie=b+"="+escape(a.parser.json.stringify(c))+g+"; path=/"},getItem:function(b){if(0<document.cookie.length){var c=document.cookie.indexOf(b+"=");if(-1!=c){var c=c+b.length+1,f=document.cookie.indexOf(";",c);-1==f&&(f=document.cookie.length);c=a.parser.json.parse(unescape(document.cookie.substring(c,
f)));a.storage.__printGetItem("cookie",b,c);return c}}a.storage.__printGetErrorItem("cookie",b);return null},removeItem:function(b){a.storage.__printRemoveItem("cookie",b);this.setItem(b,"",-1);c&&a.message.dispatch("a.storage.remove",{key:b})}};b.setItem("__test_support","ok");"ok"===b.getItem("__test_support")&&(b.removeItem("__test_support"),b.support=!0);c=!0;return b}();a.storage.cookie=a.storage.type.cookie;
a.storage.type.localStorage=function(){var c=!1;"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("__test_support","o"),"o"===window.localStorage.getItem("__test_support")&&(window.localStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"localStorage",getItem:function(b){if(c){var d=window.localStorage.getItem(b);if(a.isNull(d))return a.storage.__printGetErrorItem("localStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("localStorage",
b,d);return d}return null},setItem:function(b,d){c&&(a.storage.__printSetItem("localStorage",b,d),window.localStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("localStorage",b),window.localStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.globalStorage=function(){var c=!1,b=window.location.hostname;a.isNull(window.globalStorage)||(window.globalStorage[b].setItem("__test_support","ok"),"ok"==window.globalStorage[b].getItem("__test_support")&&(window.globalStorage[b].removeItem("__test_support"),c=!0));return{support:c,engine:"globalStorage",getItem:function(d){if(c){var e=window.globalStorage[b].getItem(d);if(a.isObject(e)&&!a.isNull(e.value))return e=a.parser.json.parse(e.value),a.storage.__printGetItem("globalStorage",
d,e),e;if(a.isNull(e))a.storage.__printGetErrorItem("globalStorage",d);else return e=a.parser.json.parse(e),a.storage.__printGetItem("globalStorage",d,e),e}return null},setItem:function(d,e){c&&(a.storage.__printSetItem("globalStorage",d,e),window.globalStorage[b].setItem(d,a.parser.json.stringify(e)),a.message.dispatch("a.storage.add",{key:d,value:e}))},removeItem:function(d){c&&(a.storage.__printRemoveItem("globalStorage",d),window.globalStorage[b].removeItem(d),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.memory=function(){var c={};return{support:!0,engine:"memory",getItem:function(b){var d=c[b];if(!a.isNull(d))return a.storage.__printGetItem("memory",b,d),a.console.log("a.storage.memory.getItem: found item (key: "+b+", value: "+d+")",3),d;a.storage.__printGetErrorItem("memory",b);return null},setItem:function(b,d){c[b]=d;a.storage.__printSetItem("memory",b,d);a.message.dispatch("a.storage.add",{key:b,value:d})},removeItem:function(b){a.storage.__printRemoveItem("memory",b);a.isNull(c[b])||
(delete c[b],a.message.dispatch("a.storage.remove",{key:b}))}}}();a.storage.memory=a.storage.type.memory;
a.storage.type.sessionStorage=function(){var c=!1;"sessionStorage"in window&&!a.isNull(window.sessionStorage)&&(window.sessionStorage.setItem("__test_support","o"),"o"===window.sessionStorage.getItem("__test_support")&&(window.sessionStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"sessionStorage",getItem:function(b){if(c){var d=window.sessionStorage.getItem(b);if(a.isNull(d))return a.storage.__printGetErrorItem("sessionStorage",b),null;d=a.parser.json.parse(d);a.storage.__printGetItem("sessionStorage",
b,d);return d}return null},setItem:function(b,d){c&&(a.storage.__printSetItem("sessionStorage",b,d),window.sessionStorage.setItem(b,a.parser.json.stringify(d)),a.message.dispatch("a.storage.add",{key:b,value:d}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("sessionStorage",b),window.sessionStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.userData=function(){var c=!1;if(document.all)try{document.write('<input type="hidden" id="a_storage" style="display:none;behavior:url(\'#default#userData\')" />');var b=document.getElementById("a_storage");b.load("aUserDataStorage");b.setAttribute("__test_support","ok");b.save("aUserDataStorage");"ok"===b.getAttribute("__test_support")&&(b.removeAttribute("__test_support"),b.save("aUserDataStorage"),c=!0)}catch(d){c=!1}return{support:c,engine:"userData",getItem:function(d){if(c){var f=
a.parser.json.parse(b.getAttribute(d));if(a.isNull(f))return a.storage.__printGetErrorItem("userData",d),null;a.storage.__printGetItem("userData",d,f);return f}return null},setItem:function(d,f){c&&(a.storage.__printSetItem("userData",d,f),b.setAttribute(d,a.parser.json.stringify(f)),b.save("aUserDataStorage"),a.message.dispatch("a.storage.add",{key:d,value:f}))},removeItem:function(d){c&&(a.storage.__printRemoveItem("userData",d),b.removeAttribute(d),b.save("aUserDataStorage"),a.message.dispatch("a.storage.remove",
{key:d}))}}}();
a.storage.type.flash=function(){function c(c){if(!1===b&&!1===d){var g=document.createElement("div");g.id="flashstoragecontent";document.body.appendChild(g);var h={id:e,rootId:g.id,flashvars:{},params:{wmode:"transparent",menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always"}};a.loader.flash(a.url+"vendor/storage/flash/localStorage.swf",function(e){d=!0;e=document.getElementById(h.id);!0===e.testData()&&(b=!0,e.setDatabase("a_flashStorage"));!0===b&&a.isFunction(c)&&c(b)},
h)}else!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1,e="flashstorage";return{support:function(){return b},ready:function(){return d},engine:"flash",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var d=document.getElementById(e).getData(c);if(a.isNull(d))return a.storage.__printGetErrorItem("flash",c),null;a.storage.__printGetItem("flash",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("flash",c,d),document.getElementById(e).setData(c,
d))},removeItem:function(c){this.start();if(!0===b)return a.storage.__printRemoveItem("flash",c),document.getElementById(e).removeData(c)}}}();
a.storage.type.silverlight=function(){function c(c){if(!1===b&&!1===d){var g=document.createElement("div");g.id="__silverlightstorage";document.body.appendChild(g);var h={id:e,rootId:g.id,params:[{name:"minRuntimeVersion",value:"2.0.31005.0"},{name:"autoUpgrade",value:"true"}]};a.loader.silverlight(a.url+"vendor/storage/silverlight/silverlightStorage.xap",function(e){d=!0;!0===document.getElementById(h.id).Content.store.testData()&&(b=!0);!0===b&&a.isFunction(c)&&c(b)},h)}else!0===b&&a.isFunction(c)&&
c(b)}var b=!1,d=!1,e="silverlightstorage";return{support:function(){return b},ready:function(){return d},engine:"silverlight",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var d=document.getElementById(e).Content.store.loadData(c);if(a.isNull(d)||"false"===d)return a.storage.__printGetErrorItem("silverlight",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("silverlight",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("silverlight",
c,d),document.getElementById(e).Content.store.saveData(c,a.parser.json.stringify(d)))},removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("silverlight",c),document.getElementById(e).Content.store.removeData(c))}}}();
a.storage.type.javafx=function(){function c(c){!1===b&&!1===d?a.loader.javafx(a.url+"vendor/storage/javafx/JavaFXStorage.jar",function(){d=!0;!0===document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.testData()&&(b=!0,el.setDatabase("a_javafxStorage"));!0===b&&a.isFunction(c)&&c(b)},{code:"javafxstorage.Main",id:"javafxstorage"}):!0===b&&a.isFunction(c)&&c(b)}var b=!1,d=!1;return{support:function(){return b},ready:function(){return d},engine:"javafx",start:function(b){c(b)},
getItem:function(c){this.start();if(!0===b){var d=document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.loadData(c);if(a.isNull(d)||"false"===d)return a.storage.__printGetErrorItem("javafx",c),null;d=a.parser.json.parse(d);a.storage.__printGetItem("javafx",c,d);return d}return null},setItem:function(c,d){this.start();!0===b&&(a.storage.__printSetItem("javafx",c,d),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.saveData(c,a.parser.json.stringify(d)))},
removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("javafx",c),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.removeData(c))}}}();a.storage.temporary=function(){for(var c=["sessionStorage","cookie","memory"],b=0,d=c.length;b<d;++b){var e=c[b];if(a.storage.type[e].support)return a.console.log("a.storage.temporary: choosing storage "+a.storage.type[e].engine,3),a.message.dispatch("a.storage.temporary.change",{engine:e}),a.storage.type[e]}return null}();
a.storage.external=function(){function c(b,c){a.storage.external.ready=b.ready;a.storage.external.support=b.support;a.storage.external.engine=b.engine;a.storage.external.getItem=b.getItem;a.storage.external.setItem=b.setItem;a.storage.external.removeItem=b.removeItem;a.isFunction(c)&&c()}return{start:function(b){var d=a.storage.type.silverlight,e=a.storage.type.flash,f=a.storage.type.javafx;d.start(function(g){g?(a.console.log("a.storage.external: choosing storage silverlight",3),c(d,b)):e.start(function(d){d?
(a.console.log("a.storage.external: choosing storage flash",3),c(e,b)):f.start(function(d){d?(a.console.log("a.storage.external: choosing storage javafx",3),c(f,b)):a.console.warn("a.storage.external: choosing storage NONE AVAILABLE",3)})})})}}}();
a.storage.persistent=function(){for(var c=["localStorage","globalStorage","userData","cookie"],b=0,d=c.length;b<d;++b){var e=c[b];if(a.storage.type[e].support)return a.console.log("a.storage.persistent: choosing storage "+a.storage.type[e].engine,3),a.message.dispatch("a.storage.persistent.change",{engine:e}),a.storage.type[e]}return null}();
null==a.storage.persistent&&(a.storage.persistent={},a.storage.persistent.support=!1,a.storage.persistent.engine=function(){return"none"},a.storage.persistent.getItem=function(){return null},a.storage.persistent.setItem=function(){},a.storage.persistent.removeItem=function(){});a.storage.support=a.storage.persistent.support;a.storage.engine=a.storage.persistent.engine;a.storage.getItem=a.storage.persistent.getItem;a.storage.setItem=a.storage.persistent.setItem;a.storage.removeItem=a.storage.persistent.removeItem;
